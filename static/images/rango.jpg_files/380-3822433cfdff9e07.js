"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{80380:function(e,t,r){r.d(t,{Z:function(){return G}});var a=r(52322),n=r(2784),i=r(54588),s=r(86958),o=r(82453),d=r(51250),l=r(16189);let c="ad-oo",u={setConsentToCookie:(e,t,r)=>{try{let a=(0,d.rZ)(c,r),n=0;if(void 0!==a&&(("number"==typeof a||"string"==typeof a)&&(n=parseInt(a)),n&t&&!e||!(n&t)&&e))return;e||(n|=t);let i=new Date;i.setHours(i.getHours()+36),(0,d.Ys)(c,n.toString(),i,"shared")}catch(r){(0,l.createLogger)()("cookieConsent").error("Failed to set CCBA consent to cookie",{error:r,consent:e,mask:t,operation:"setConsentToCookie",cookieName:c})}}};var f=r(54073),p=r.n(f),w=r(45455),v=r.n(w),g=r(91754),h=r(54172),m=r(22431),A=r(64461),S=r(56044),E=r(41599),_=r(113),y=r(67593),I=r(22873);let b=(e,t)=>{window?.mediaOrchestrator?.publish(e,t)};var k=r(47401),M=r(98537),R=r.n(M);let L={init:()=>{try{window?.imdb_ad_debug||(window.imdb_ad_debug=L)}catch{}},override:e=>{try{L.init(),R()(L,e)}catch{}},adRefresh:{isPaused:!1,pause:()=>{L.override({adRefresh:{isPaused:!0}})},resume:()=>{L.override({adRefresh:{isPaused:!1}})}},auction:{default:()=>{window.ad_utils?.apsAuctionManager?.forceDefaultRender()},preferAaxAds:()=>{window.ad_utils?.apsAuctionManager?.forceAaxRender()},prefer3pAds:()=>{window.ad_utils?.apsAuctionManager?.forceApsRender()},view3pAdAuditLog:()=>{window.ad_utils?.apsAuctionManager?.viewAuditLog()}}};var C=r(503),P=r(59938);let N={isReady:!1,hasSetInterval:!1},D=(e,t,r,a,n)=>{if(!e.adRefreshInfo||!O(e.adRefreshInfo))return()=>{};document.addEventListener("visibilitychange",x),n(T);let i=e=>{if(e.detail){let{slotName:t,shouldSlotRefresh:r}=e.detail;n(e=>({...e,[t]:r}))}};window.addEventListener("updateAdRefreshStateForSlot",i),window.ad_utils?.apsAuctionManager?.refreshEventQueue?.forEach(i),N.isReady=!0;let s=window.setInterval(z,1e3*e.adRefreshInfo.intervalInSeconds,e,a,t,r);return N.hasSetInterval=!0,L.override({adRefresh:{tryRefresh:()=>{z(e,a,t,r,!0)}}}),()=>{clearInterval(s),document?.removeEventListener("visibilitychange",x),window?.removeEventListener("updateAdRefreshStateForSlot",i)}},x=()=>{"visible"===document.visibilityState?(N.isReady=!0,N.postResponseCallback=void 0):N.postResponseCallback=()=>{N.isReady=!1}},O=e=>!(0,C.oW)()&&!!(!N.hasSetInterval&&e.isEnabled&&e.intervalInSeconds>0),T=e=>Object.entries(e).reduce((e,t)=>{let[r]=t;return{...e,[r]:F(r)}},{}),F=e=>j(e)&&(0,P.Gr)(e)&&!$(e)&&!W(e)&&!q(e),j=e=>!!window?.AdSlots?.[e],W=e=>{let t=window.ad_utils?.get_slot_iframe(e);return!!t?.hasAttribute("data-first-party-creative-template")},$=e=>window.AdSlots?.[e]?.creativeMetadata?.adProductType?.grade===k.rP.PREMIUM,q=e=>{let t=window.ad_utils?.get_slot_iframe(e);return!!t?.hasAttribute("data-native-ad-creative")},z=function(e,t,r,a){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(L.adRefresh?.isPaused&&!n||!N.isReady||(0,I.rm)()||!e.adFetchingInfo)return;let i=Object.entries(t.current??{}).filter(e=>{let[,t]=e;return t}).map(e=>{let[t]=e;return t}),s={webAdsInput:e.adFetchingInfo.params.input,legacySlotSizeMap:e.slotSizeMap??{},apsSlotInfoMap:e.apsSlotInfoMap??{},eligibleSlots:i,isRefreshRequest:!0};(0,y.$)(s,r,a).then(N.postResponseCallback)};var B=r(67246),J=r(22862);let Y=e=>{let{adSlotsInfo:t}=e;(0,_.WJ)();let[r,i]=(0,n.useState)(E.WC),o=n.useRef(r);(0,n.useEffect)(()=>{o.current=r},[r]);let d=(0,g.x)(),{context:c}=(0,s.B)(),u=(0,l.createLogger)(c)("AdPageData"),f=()=>{if(!(0,I.rm)()&&t?.adFetchingInfo){let e=B.k.getPreviousWindowWidth(),r={webAdsInput:t.adFetchingInfo.params.input,legacySlotSizeMap:t.slotSizeMap??{},apsSlotInfoMap:t.apsSlotInfoMap??{},eligibleSlots:Object.keys(t.slots??{}),previousWindowWidth:e};(0,y.$)(r,d,u).finally(()=>B.k.setPreviousWindowWidth())}},{slotsEnabled:w,clientSideUrlBase:k,adSlots:M,slotSizeMap:R,apsSlotInfoMap:L}=(0,_.OF)(t);(0,n.useEffect)(()=>{let e;if(w&&!v()(R)&&(B.k.setPreviousWindowWidth(),e=p()(f,750),window.addEventListener("resize",e)),!w||!k||!M.includes(m.A.INLINE20)){let e={type:A.X.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,slotName:m.A.INLINE20,timestamp:Date.now()},t={type:A.X.EMPTY,slotName:"",timestamp:Date.now()};b(S.x.MEDIA_PLAYBACK_EVENT_NAME,e),b(S.x.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,t)}return()=>{e&&window.removeEventListener("resize",e)}},[]),(0,n.useEffect)(()=>{let e,r;if(!(!w||v()(R))&&t?.adRefreshInfo?.isEnabled)return"complete"===document.readyState?e=D(t,d,u,o,i):(r=()=>{e=D(t,d,u,o,i)},window.addEventListener("load",r)),()=>{e?.(),r&&window.removeEventListener("load",r)}},[t]);let C=(0,_.f8)(w??!1,M,JSON.stringify(R),JSON.stringify(L??{}),t?.adFetchingInfo),P=(0,J.Cq)(t);return(0,a.jsxs)(a.Fragment,{children:[P?(0,a.jsx)(h.j,{sisSlotMarkup:P}):null,(0,a.jsx)("script",{async:!0,dangerouslySetInnerHTML:{__html:C}})]})};function G(){let e=(0,s.B)(),{adSlotsInfo:t}=(0,o.Ok)();return e?.context?.sidecar?.ads?.adsCcbaConsent!==void 0&&u.setConsentToCookie(e.context.sidecar?.ads?.adsCcbaConsent,16,e.context?.headers),(0,a.jsx)(i.Z,{name:"IMDbNextAdPageData",children:(0,a.jsx)(Y,{adSlotsInfo:t})})}},54172:function(e,t,r){r.d(t,{j:function(){return A}});var a,n,i=r(52322),s=r(2784),o=r(23906),d=r(59938);let l=(0,r(16189).createLogger)()("util_sisPixel_rws");(a=n||(n={})).GRANTED="granted",a.PROMPT="prompt",a.DENIED="denied";let c=new Set().add("fake_treatment_1.1").add("fake_treatment_1.2").add("fake_treatment_1.3").add("fake_control_2"),u=["mousedown","scroll","keydown"],f="https://amazon-adsystem.com",p=async()=>{let e="cookieDeprecationLabel"in navigator,t="requestStorageAccessFor"in document;if(!e||!t)return l.log("Browser not compatible with Related Website Sets",{hasCookieDeprecationLabel:e,hasRequestStorageAccessFor:t}),!1;try{let e=await navigator.cookieDeprecationLabel.getValue();return l.log(`Received cookieDeprecationLabel: ${e}`),c.has(e)}catch(e){return l.error("Issue fetching cookieDeprecationLabel",e),!1}},w=async()=>{let e=await g();switch(l.log(`Received storageAccessPermissionStatus: ${e}`),e){case"granted":return h();case"prompt":return v()}l.log(`'top-level-storage-access' permissions for ${f}: denied`)},v=async()=>{let e;if(!navigator.userActivation)return;let t=new Promise(t=>{e=e=>t(e)}),r=async()=>{navigator.userActivation.isActive&&(u.forEach(e=>{document.removeEventListener(e,r)}),await h(),e(!0))};return u.forEach(e=>{document.addEventListener(e,r)}),t},g=async()=>{try{return(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:f})).state}catch(e){l.error("Error querying Storage Access permissions",e);return}},h=async()=>{if("requestStorageAccessFor"in document)try{return await document.requestStorageAccessFor(f),!0}catch(e){l.error("Error requesting storage access",e)}};var m=r(22862);let A=s.memo(e=>{let{sisSlotMarkup:t}=e,[r,a]=(0,s.useState)(!1),n=(0,o.wL)("util_sisSlotMarkup");return(0,s.useEffect)(()=>{(async()=>{if(!await p())return a(!0);await w();let e=(0,m.jD)(t,n);e&&await Promise.all(e.map(e=>(0,m.Lg)(e,n)))})()},[]),r?(0,i.jsx)("div",{ref:d.SK.bind(null,t)}):null})},113:function(e,t,r){r.d(t,{OF:function(){return o},WJ:function(){return i},Wd:function(){return l},a5:function(){return d},f8:function(){return s}});var a=r(83473),n=r(47401);let i=()=>{void 0===window.hasAdAJAXCallFired&&(window.hasAdAJAXCallFired=!1)},s=(e,t,r,n,i)=>{if(!i)return"";let s=i.endpoint,o=(0,a.S)(i.query),d=JSON.stringify(i.params);return`
        if (window && window.ad_utils && window.ad_utils.makeAdsGraphletCall) {
            window.ad_utils.makeAdsGraphletCall(
                '${s}',
                \`${o}\`,
                ${d},
                '${t}',
                ${r},
                ${n},
                ${e}
            );
    }`},o=e=>({slotsEnabled:!e||e.slotsEnabled,clientSideUrlBase:e?e.clientSideUrl:"",adSlots:e&&e.slots?Object.keys(e.slots).join(","):"",slotSizeMap:e?e.slotSizeMap:{},apsSlotInfoMap:e&&e.apsSlotInfoMap||{}}),d=()=>{window?.lastActualAdMarkup||(window.lastActualAdMarkup={})},l=e=>!e||e?.creativeMetadata?.creativeWidth===0||e?.creativeMetadata?.adProductType?.name===n.A7.BLANK},22862:function(e,t,r){r.d(t,{Cq:function(){return n},Lg:function(){return s},jD:function(){return i}});var a=r(22431);let n=e=>{let t=e?.slots;return t&&t[a.A.SIS_PIXEL]?.slotMarkup},i=(e,t)=>{let r=Array.from(e.matchAll(/el\.src="([^"]*)";/g)).map(e=>e[1]);return r.length||t.error("Failed to retrieve SIS Pixel URL"),r},s=async(e,t)=>{try{return await fetch(e,{method:"GET",credentials:"include"}),!0}catch(e){t.error("Error fetching SIS Pixel",e)}}}}]);